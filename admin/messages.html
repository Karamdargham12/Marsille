<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Messages</title>
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0,">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
            href="https://fonts.googleapis.com/css2?family=Abril+Fatface&family=Comforter+Brush&family=Heebo:wght@400;500;600;700&display=swap"
            rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

</head>
<style>
    .navbar{
        flex-wrap: nowrap;
    }
    a{
    text-decoration: none ;
}
#loadingIndicator{
text-align: center;
font-size: 2.5rem;

}
.carousel-control-next-icon{
background-color: black !important;
}
.carousel-control-prev-icon{
background-color: black !important;
}
.card-header:first-child{
    background-image: url(../assets/images/footer-bg.png);
    background-color: #fffbf2;
    background-repeat: no-repeat;
    background-size: cover;
    background-position: center;
    color: var(--oxford-blue);
    padding-block: 10px;
}
h5{
font-size: 20px !important;
font-weight: 900
}
.card-header{
font-size: 24px !important;
}
p{
font-size: 20px !important;
}
#message{
    margin: 50px;
padding-top: 20px;
    padding-bottom: 400px;
}
</style>
<body id="top" style="font-family: 'travelFont' !important;font-weight: 900">
<header class="header" data-header>
    <div class="contain">

        <button class="nav-toggle-btn" data-nav-toggle-btn aria-label="Toggle Menu">
            <ion-icon name="menu-outline" class="open"></ion-icon>
            <ion-icon name="close-outline" class="close"></ion-icon>
        </button>

        <nav class="navbar">
            <div>
                <a href="../index.html" dir="ltr">
                    <img src="../assets/images/Logo.png" class="logo" alt="MarsilleTravel">
                </a>
            </div>
            <div>
                <ul class="navbar-list">

                    <li>
                        <a href="../index.html" class="navbar-link">Home</a>
                    </li>

                    <li>
                        <a href="../services.html" class="navbar-link">Services</a>
                    </li>

                    <li>
                        <a href="../about-us.html" class="navbar-link">About Us</a>
                    </li>

                    <li>
                        <a href="../Tours.html" class="navbar-link">Tours</a>
                    </li>

                    <li>
                        <a href="../contact-us.html" class="navbar-link">Contact Us</a>
                    </li>


                </ul>
            </div>
            <div>
                <a href="../ar/services.html"><img src="../assets/images/uae.png"></a>
            </div>
        </nav>

    </div>
</header>
<div id="message">
    <div id="loadingIndicator">Loading Messages....</div>
    <div id="carouselExampleControlsNoTouching" class="carousel slide" data-bs-touch="false">
        <div class="carousel-inner" id="in">

        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControlsNoTouching" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControlsNoTouching" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
</div>



<footer class="footer" style="background-image: url('../assets/images/footer-bg.png')">
    <div class="contain">

        <div class="footer-top">

            <ul style="text-align: center;" class="footer-list">

                <li>
                    <p class="footer-list-title">Top Destination </p>
                </li>

                <li>
                    <a href="#" class="footer-link">United Arab Emirates, Dubai</a>
                </li>

                <li>
                    <a href="#" class="footer-link">Bangkok, Thailand</a>
                </li>

                <li>
                    <a href="#" class="footer-link">Georgia, Tbilisi</a>
                </li>

                <li>
                    <a href="#" class="footer-link">Az…ôrbaycan, Baku</a>
                </li>

                <li>
                    <a href="#" class="footer-link">Saudi Arabia, Makkah</a>
                </li>

            </ul>


            <ul style="text-align: center;" class="footer-list">

                <li>
                    <p  class="footer-list-title"> Quick Links</p>
                </li>

                <li>
                    <a href="../about-us.html" class="footer-link">About Us</a>
                </li>

                <li>
                    <a href="../contact-us.html" class="footer-link">Contact Us</a>
                </li>

                <li>
                    <a href="../Tours.html" class="footer-link">Tours</a>
                </li>


            </ul>


            <ul class="footer-list">

                <li>
                    <p style="text-align: center;" class="footer-list-title">Our Vision</p>
                </li>

                <li>
                    <p style="text-align: center;" > We strive to be Marseille Tourism and Travel's leader in our field and the first choice for those seeking unique travel experiences around the world.</p>
                </li>



            </ul>
            <ul class="footer-list">

                <li>
                    <div >
                        <a href="../index.html" dir="ltr" style="display: flex;justify-content: center;align-items: center;padding-top: 20px">
                            <img src="../assets/images/Logo.png" class="logo-footer" alt="MarsilleTravel">
                        </a>
                    </div>
                </li>

            </ul>


        </div>


        <div class="footer-bottom">
            <p class="copyright">
                All Rights Reserved
                &copy; 2024 <a href="https://aunak.it" class="copyright-link">AunakIT</a>
            </p>

            <ul class="social-list">

                <li>
                    <a href="https://www.facebook.com/profile.php?id=61555838731776" class="social-link">
                        <ion-icon name="logo-facebook"></ion-icon>
                    </a>
                </li>
                <li>
                    <a href="https://www.instagram.com/marsille_travel_agency?igsh=YTZiaHRleGNlYjZi" class="social-link">
                        <ion-icon name="logo-instagram"></ion-icon>
                    </a>
                </li>
                <li>
                    <a href="mailto:info@marsilletravel.com" class="social-link">
                        <ion-icon name="mail-outline"></ion-icon>
                    </a>
                </li>

                <li>
                    <a href="tel:+971585584820" class="social-link">
                        <ion-icon name="call-outline"></ion-icon>
                    </a>
                </li>

            </ul>

        </div>

    </div>
</footer>





<!--
  - #GO TO TOP
-->

<a href="#top" class="go-top" data-go-top aria-label="Go To Top">
    <ion-icon name="chevron-up-outline"></ion-icon>
</a>
<script type="module">
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";

    const auth = getAuth();
    onAuthStateChanged(auth, user => {
        if (!user) {
            // User is not signed in, redirect them to the login page
            window.location.href = '/login.html';
        } else {
            // User is signed in, display the page or perform other actions
        }
    });
</script>
<script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
        apiKey: "AIzaSyA-SRMGBB0KNd62h0EN8VtjlZuXAZ3Rt2g",
        authDomain: "marsille-travel.firebaseapp.com",
        databaseURL: "https://marsille-travel-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "marsille-travel",
        storageBucket: "marsille-travel.appspot.com",
        messagingSenderId: "613416398489",
        appId: "1:613416398489:web:40d08ae6259041715dd208",
        measurementId: "G-NS7Y7SLP0K"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    var name = 'loading...'
    var email = 'loading...'
    var phone = 'loading...'
    var messageText = 'loading...'
    var message = document.getElementById('message')
    var incarousel = document.getElementById('in')

    import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";

    const db = getDatabase();
    const starCountRef = ref(db, 'users/');
    let isLoading = true;

    function showLoadingIndicator() {
        document.getElementById('loadingIndicator').style.display = 'block';
    }

    function hideLoadingIndicator() {
        document.getElementById('loadingIndicator').style.display = 'none';
        isLoading = false;
    }

    function updateUI(dataArray) {
        const incarousel = document.getElementById('in');
        let isFirstItem = true;
        dataArray.reverse().forEach((value,index) => {
            const name = value.name;
            const email = value.email;
            const phone = value.phone;
            const messageText = value.message;
            incarousel.innerHTML += `<div class="carousel-item ${isFirstItem ? 'active' : ''}">
<div class="card text-center">
  <div class="card-header">
    Message (${index+1})
  </div>
  <div class="card-body">
    <h5 class="card-title">Name : ${name}</h5>
    <p class="card-text">Email : ${email}</p>
    <p class="card-text">Phone Number : ${phone}</p>
    <p class="card-text">Message :${messageText}</p>
  </div>
</div>
</div>`;
            isFirstItem = false;
        });
        hideLoadingIndicator();
    }

    function showErrorToUser(error) {

        console.error('Error:', error);
    }

    function fetchData() {
        showLoadingIndicator();
        onValue(starCountRef, (snapshot) => {
            const data = snapshot.val();
            const dataArray = Object.keys(data).map(key => {
                return {
                    id: key,
                    ...data[key]
                };
            });
            updateUI(dataArray);
        }, (error) => {
            showErrorToUser(error);
        });
    }
    fetchData();
</script>
</body>
</html>